<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:mk="http://mkremer.lu/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core" >
    <h:head>
        <title>Available channels</title>
        <meta charset="utf-8"/>
    </h:head>
    <h:body>
	    <ui:insert name="navbar" >
			<ui:include src="navbar.xhtml" />
		</ui:insert> 
		<b:container style="margin-top:70px">
			<mk:restricted condition="#{usession.loggedIn}">
				<h1>
					<h:outputText value="Available channels" />
					<b:button value="Message feed" outcome="index.xhtml" icon-awesome="fa-rss" style="margin-left:0.5em;" />
					<b:button value="Subscriptions" outcome="subscriptions.xhtml" icon-awesome="fa-th-list" style="margin-left:0.5em;" />
				</h1>
				<b:messages />
				<b:dataTable value="#{avchannels.channels}" var="channel">
					<b:dataTableColumn value="#{channel.name}" label="Name" />
					<b:dataTableColumn value="#{channel.description}" label="Description" />
					<b:dataTableColumn label="" orderable="false">
						<b:form>
							<b:commandButton value="Subscribe" icon-awesome="fa-plus" action="#{avchannels.subscribe(channel.id)}" />
						</b:form>
					</b:dataTableColumn>
				</b:dataTable>
			</mk:restricted>
		</b:container>
    </h:body>
</html>